(function(a,b,c){var d=b.document;a.fn.imageGrid=function(b){var c,d=function(a){console&&console.log&&typeof console.log=="function"&&console.log(a)},e=function(a){return a&&typeof a=="function"},f={speed:1500,speedMargin:200,how:"vertical",api:!1,shuffle:!1,rows:null,columns:null,limit:Number.MAX_VALUE},g=a.extend({},f,b),h={Tile:function(b,c){var d=this,f=c,h=a(b),i=!1,j=h.parent(),k,l,m,n,o,p={position:"absolute",top:0,left:0},q=function(){return g.speed-g.speedMargin+Math.floor(Math.random()*g.speedMargin*2)},r={calculateRatios:function(){k=h.width(),l=h.height(),m=f.width/k,n=f.height/l},positionTile:function(){r.calculateRatios(),j.css(o)},applyImageCss:function(){m<n?a.extend(p,{height:f.height,width:"auto"}):a.extend(p,{width:f.width,height:"auto"}),h.css(p)},positionImage:function(){r.calculateRatios(),r.applyImageCss(),m<n?h.css({top:"auto",left:parseInt(f.width/2)-parseInt(h.width()/2)}):h.css({left:"auto",top:parseInt(f.height/2)-parseInt(h.height()/2)})},loadImage:function(b){var c=!0,d=function(){this.complete&&a(this).trigger("load")};b&&(c=!1,a("<img/>").attr("src",b).load(function(){r.hideImage(function(){h.attr("src",b).each(d)})})),h.one("load",function(){i=!0,r.positionImage(),setTimeout(function(){r.showImage()},g.speedMargin+Math.floor(Math.random()*g.speedMargin*2))}),c&&h.each(d)},showImage:function(b){h.fadeIn(q(),function(){e(b)&&b.apply(s),a(d).trigger("image-show")})},hideImage:function(b){h.fadeOut(q(),function(){e(b)&&b.apply(s),a(d).trigger("image-hide")})}},s={load:function(a){r.loadImage(a)},show:function(){r.showImage()},hide:function(a){r.hideImage(a)},setLocation:function(a){return f=a,o={position:"absolute",top:f.top,left:f.left,width:f.width,height:f.height,overflow:"hidden"},r.positionTile(),r.positionImage(),this},getLocation:function(){return f}};return s}},i=a(this),j,k,l=[],m=a("img",i),n=m.length,o=g.limit,p=function(a){o=a},q=function(){return Math.min(n,o)},r=function(){return{vertical:{getLocation:function(a,b){return{width:j/b,height:k,left:a*j/b,top:0}}},horizontal:{getLocation:function(a,b){return{width:j,height:k/b,left:0,top:a*k/b}}}}}(),s,t=function(){i.css("position")==="static"&&i.css("position","relative"),u(),i.data("image-grid-started")||(i.css({visibility:"visible"}),m.hide().each(function(){l.push(h.Tile(this))}),i.data("image-grid-started",!0))},u=function(){j=i.width(),k=i.height()},v=function(){var b=[];return r[g.how]||(g.how=f.how),s=r[g.how],a.each(l,function(a){b.push(s.getLocation(a,q()))}),b},w=function(){var b;t(),firstRun=!1,b=v(),a.each(l,function(a){this.setLocation(b[a]).load()})};return g.api?{run:function(){w()}}:(w(),this)}})(jQuery,this);